{"remainingRequest":"/home/neuron/build/html5/node_modules/babel-loader/lib/index.js!/home/neuron/build/html5/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/neuron/build/html5/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/neuron/build/html5/src/pages/menus/Configuration/eventSetup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/neuron/build/html5/src/pages/menus/Configuration/eventSetup.vue","mtime":1586417712650},{"path":"/home/neuron/build/html5/node_modules/cache-loader/dist/cjs.js","mtime":1578022549920},{"path":"/home/neuron/build/html5/node_modules/babel-loader/lib/index.js","mtime":1578022512688},{"path":"/home/neuron/build/html5/node_modules/cache-loader/dist/cjs.js","mtime":1578022549920},{"path":"/home/neuron/build/html5/node_modules/vue-loader/lib/index.js","mtime":1578022550923}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.freeze\";\nimport _defineProperty from \"/home/neuron/build/html5/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport indexMixin from \"../mixins\";\nimport { Operator, EventCategory } from '@/config/index';\nimport { clone } from '@/utils/index';\nimport { mapState, mapMutations } from 'vuex';\nimport EventTable from \"./components/eventTable\";\nexport default {\n  mixins: [indexMixin],\n  data: function data() {\n    return {\n      dialogTableVisible: false,\n      eventForm: {},\n      eventFormRules: {},\n      objectList: [],\n      Operator: Operator,\n      EventCategory: EventCategory,\n      multipleSelection: []\n    };\n  },\n  created: function created() {\n    if (!this.resultData.length) {\n      this.$message.error('please setup object!');\n      this.$router.push({\n        name: 'Configuration-objectSetup'\n      });\n    }\n\n    this.init();\n  },\n  computed: _objectSpread({}, mapState({\n    resultData: function resultData(state) {\n      return state.SetUpData.objectData;\n    },\n    msgd: function msgd(state) {\n      return state.SetUpData.eventData;\n    }\n  })),\n  methods: _objectSpread({\n    init: function init() {\n      this.buildObjectList();\n    },\n    handleSubmit: function handleSubmit() {\n      this.$router.push({\n        name: 'Configuration-overview'\n      });\n    },\n    addEvent: function addEvent() {\n      this.dialogTableVisible = true;\n    },\n    submitNewEvent: function submitNewEvent() {\n      var _this = this;\n\n      this.$refs.eventForm.validate(function (valid) {\n        if (valid) {\n          _this.addEventData(clone(_this.eventForm));\n\n          _this.dialogTableVisible = false;\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    close: function close() {\n      this.eventForm = {};\n      this.$refs.eventForm && this.$refs.eventForm.clearValidate();\n    },\n    buildObjectList: function buildObjectList() {\n      var list = [];\n\n      for (var j = 0, jlen = this.resultData ? this.resultData.length : 0; j < jlen; j++) {\n        var data = this.resultData[j];\n        var objn = data.objn,\n            preAndSuff = data.preAndSuff,\n            oatt = data.oatt;\n        var attr = oatt.map(function (i) {\n          return i.attn;\n        });\n\n        for (var i = 0, psLen = preAndSuff.length; i < psLen; i++) {\n          var _preAndSuff$i = preAndSuff[i],\n              pref = _preAndSuff$i.pref,\n              suff = _preAndSuff$i.suff;\n          pref = pref ? pref + '_' : '';\n          suff = suff ? '_' + suff : '';\n          list.push({\n            name: pref + objn + suff,\n            attr: attr\n          });\n        }\n      }\n\n      this.objectList = Object.freeze(list);\n    },\n    filterAttrList: function filterAttrList(val) {\n      if (!val) return [];\n\n      for (var i = 0, len = this.objectList.length; i < len; i++) {\n        var item = this.objectList[i];\n\n        if (item.name === val) {\n          return item['attr'];\n        }\n      }\n\n      return [];\n    },\n    handleDelete: function handleDelete() {\n      var _this2 = this;\n\n      if (!this.multipleSelection.length) return;\n      this.$confirm('Are you sure delete these event?', 'delete event', {\n        type: 'warning'\n      }).then(function () {\n        _this2.deleteEventData(_this2.multipleSelection);\n      }).catch(function () {});\n    }\n  }, mapMutations(['addEventData', 'deleteEventData'])),\n  components: {\n    EventTable: EventTable\n  }\n};",{"version":3,"sources":["eventSetup.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Container type=\"card-full\"\n             :scorll='false'>\n    <div class='flex dd-mb'>\n      <div class=\"dd-title\">Event Setup</div>\n      <div>\n        <el-button @click='handleSubmit'>submit</el-button>\n        <el-button @click='addEvent'\n                   type=\"primary\">Created</el-button>\n        <el-button @click='handleDelete'\n                   type=\"danger\">Delete</el-button>\n      </div>\n    </div>\n    <EventTable v-model=\"multipleSelection\"\n                :showBtn='true'\n                :eventList='msgd' />\n    <el-dialog title=\"Event Setup\"\n               @closed='close'\n               :visible.sync=\"dialogTableVisible\">\n      <el-form :model=\"eventForm\"\n               ref=\"eventForm\"\n               :rules=\"eventFormRules\"\n               label-width=\"120px\">\n        <el-form-item label='Object1'\n                      prop=\"sobj\">\n          <el-select v-model=\"eventForm.sobj\">\n            <el-option v-for=\"item in objectList\"\n                       :key=\"item.name\"\n                       :label=\"item.name\"\n                       :value=\"item.name\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Attribute1'\n                      prop=\"satt\">\n          <el-select v-model=\"eventForm.satt\">\n            <el-option v-for=\"item in filterAttrList(eventForm.sobj)\"\n                       :key=\"item+'satt'\"\n                       :label=\"item\"\n                       :value=\"item\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Type'\n                      prop=\"msgt\">\n          <el-select v-model=\"eventForm.msgt\">\n            <el-option v-for=\"item in Operator\"\n                       :key=\"item.val\"\n                       :label=\"item.val\"\n                       :value=\"item.val\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Object2'\n                      prop=\"cobj\">\n          <el-select v-model=\"eventForm.cobj\">\n            <el-option v-for=\"item in objectList\"\n                       :key=\"item.name\"\n                       :label=\"item.name\"\n                       :value=\"item.name\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Attribute2'\n                      prop=\"catt\">\n          <el-select v-model=\"eventForm.catt\">\n            <el-option v-for=\"item in filterAttrList(eventForm.cobj)\"\n                       :key=\"item+'catt'\"\n                       :label=\"item\"\n                       :value=\"item\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Category'\n                      prop=\"catt\">\n          <el-select v-model=\"eventForm.acat\">\n            <el-option v-for=\"item in EventCategory\"\n                       :key=\"item.val\"\n                       :label=\"item.val\"\n                       :value=\"item.val\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label='Subroutine'\n                      prop=\"subr\">\n          <el-input-number v-model=\"eventForm.subr\"\n                           :controls='false'\n                           :precision='0' />\n        </el-form-item>\n        <el-form-item>\n          <el-button @click='submitNewEvent'>submit</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </Container>\n</template>\n\n<script>\nimport indexMixin from '../mixins'\nimport { Operator, EventCategory } from '@/config/index'\nimport { clone } from '@/utils/index'\nimport { mapState, mapMutations } from 'vuex'\nimport EventTable from './components/eventTable'\nexport default {\n  mixins: [indexMixin],\n  data () {\n    return {\n      dialogTableVisible: false,\n      eventForm: {},\n      eventFormRules: {},\n      objectList: [],\n      Operator,\n      EventCategory,\n      multipleSelection: []\n    }\n  },\n  created () {\n    if (!this.resultData.length) {\n      this.$message.error('please setup object!')\n      this.$router.push({ name: 'Configuration-objectSetup' })\n    }\n    this.init()\n  },\n  computed: {\n    ...mapState({\n      resultData: state => state.SetUpData.objectData,\n      msgd: state => state.SetUpData.eventData\n    })\n  },\n  methods: {\n    init () {\n      this.buildObjectList()\n    },\n    handleSubmit () {\n      this.$router.push({ name: 'Configuration-overview' })\n    },\n    addEvent () {\n      this.dialogTableVisible = true\n    },\n    submitNewEvent () {\n      this.$refs.eventForm.validate((valid) => {\n        if (valid) {\n          this.addEventData(clone(this.eventForm))\n          this.dialogTableVisible = false\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    close () {\n      this.eventForm = {}\n      this.$refs.eventForm && this.$refs.eventForm.clearValidate()\n    },\n    buildObjectList () {\n      let list = []\n\n      for (let j = 0, jlen = this.resultData ? this.resultData.length : 0; j < jlen; j++) {\n        const data = this.resultData[j]\n        const { objn, preAndSuff, oatt } = data\n        const attr = oatt.map(i => i.attn)\n        for (let i = 0, psLen = preAndSuff.length; i < psLen; i++) {\n          let { pref, suff } = preAndSuff[i]\n          pref = pref ? pref + '_' : ''\n          suff = suff ? '_' + suff : ''\n          list.push({\n            name: pref + objn + suff,\n            attr\n          })\n        }\n      }\n      this.objectList = Object.freeze(list)\n    },\n    filterAttrList (val) {\n      if (!val) return []\n      for (let i = 0, len = this.objectList.length; i < len; i++) {\n        const item = this.objectList[i]\n        if (item.name === val) {\n          return item['attr']\n        }\n      }\n      return []\n    },\n    handleDelete () {\n      if (!this.multipleSelection.length) return\n      this.$confirm('Are you sure delete these event?', 'delete event', {\n        type: 'warning'\n      }).then(() => {\n        this.deleteEventData(this.multipleSelection)\n      }).catch(() => {\n      })\n    },\n    ...mapMutations(['addEventData', 'deleteEventData'])\n  },\n  components: {\n    EventTable\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n/deep/.el-input-number {\n  width: 100%;\n  &.is-without-controls .el-input__inner {\n    text-align: left;\n  }\n}\n</style>\n"],"sourceRoot":"src/pages/menus/Configuration"}]}