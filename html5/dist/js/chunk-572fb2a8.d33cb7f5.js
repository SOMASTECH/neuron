(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-572fb2a8","chunk-2d0d05c7"],{2472:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Container",{attrs:{type:"card-full",scorll:!1}},[i("div",{staticClass:"flex"},[i("div",{staticClass:"dd-title"},[t._v("Script Programming")]),i("div",{staticClass:"row"},[i("ScriptTypeSelect",{on:{delete:t.init,submit:t.submit},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v("\n        \n      "),i("el-button",{staticClass:"dd-fr",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("submit")])],1)]),i("el-table",{staticClass:"scriptTable",attrs:{height:t.tableHeight,data:t.scriptData,border:""}},[i("el-table-column",{attrs:{label:"statement","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},on:{change:function(i){return t.handleChange(i,e.$index)}},model:{value:e.row.stmt,callback:function(i){t.$set(e.row,"stmt",i)},expression:"scope.row.stmt"}},t._l(t.scriptList,(function(t){return i("el-option",{key:t.val,attrs:{label:t.val,value:t.val}})})),1)]}}])}),i("el-table-column",{attrs:{label:"expression","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:""},model:{value:e.row.expr,callback:function(i){t.$set(e.row,"expr",i)},expression:"scope.row.expr"}})]}}])}),i("el-table-column",{attrs:{label:" ","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"btn"},[i("i",{staticClass:"el-icon-circle-plus plus",on:{click:function(i){return t.add(e.$index)}}}),t._v(" \n          "),i("i",{staticClass:"el-icon-remove remove",on:{click:function(i){return t.remove(e.$index)}}})])]}}])})],1),i("el-dialog",{attrs:{visible:t.dialogVisible,title:"POS",width:"300px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.handleClosed}},[i("el-input-number",{attrs:{min:1,max:999,controls:!1},model:{value:t.pos,callback:function(e){t.pos=e},expression:"pos"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handlePosSubmit}},[t._v("submit")])],1)],1)],1)},s=[],r=(i("7f7f"),i("7de8")),l=i("f121"),a=i("683b"),u={mixins:[r["a"]],data:function(){return{scriptData:[],scriptList:l["d"],type:{name:"",subr:""},dialogVisible:!1,pos:0,currentIndex:0}},methods:{init:function(){this.scriptData=[];var t=6;while(t--)this.scriptData.push({stmt:"",expr:""})},readSubroutine:function(t){this.$ws().set({success:this.getData}).send({func:33,subr:+t})},getData:function(t){33===t.func&&(this.$ws().remove(this.getData),t.rows?0===t.rows.length?this.init():this.scriptData=t.rows:this.init())},handlePosSubmit:function(){this.scriptData[this.currentIndex].stmt="POS".concat(this.pos),this.dialogVisible=!1},handleChange:function(t,e){"POS"===t&&(this.currentIndex=e,this.dialogVisible=!0)},handleSubmit:function(){var t=this;this.type.subr?this.$confirm("Are you sure submit these script programming","Submit",{type:"warning"}).then((function(){var e=t.scriptData,i=t.type,n=i.name,s=i.subr;t.submit(n,s,e)})).catch((function(){})):this.$message.error("select a subroutine")},submit:function(t,e,i){i||(i=[]),this.$ws().set().send({func:34,csub:0,name:t,subr:+e,nrow:i.length,rows:i})},handleClosed:function(){this.currentIndex=0},add:function(t){this.scriptData.splice(t+1,0,{stmt:"",expr:""})},remove:function(t){this.scriptData.splice(t,1)}},watch:{"type.subr":function(t){t&&this.readSubroutine(t)}},computed:{tableHeight:function(){return window.innerHeight-60-50-40-50}},components:{ScriptTypeSelect:a["default"]}},o=u,c=(i("a672"),i("2877")),b=Object(c["a"])(o,n,s,!1,null,"97e5c12a",null);e["default"]=b.exports},"28a5":function(t,e,i){"use strict";var n=i("aae3"),s=i("cb7c"),r=i("ebd6"),l=i("0390"),a=i("9def"),u=i("5f1b"),o=i("520a"),c=i("79e5"),b=Math.min,d=[].push,p="split",f="length",h="lastIndex",m=4294967295,v=!c((function(){RegExp(m,"y")}));i("214f")("split",2,(function(t,e,i,c){var y;return y="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[f]||2!="ab"[p](/(?:ab)*/)[f]||4!="."[p](/(.?)(.?)/)[f]||"."[p](/()()/)[f]>1||""[p](/.?/)[f]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(s,t,e);var r,l,a,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),b=0,p=void 0===e?m:e>>>0,v=new RegExp(t.source,c+"g");while(r=o.call(v,s)){if(l=v[h],l>b&&(u.push(s.slice(b,r.index)),r[f]>1&&r.index<s[f]&&d.apply(u,r.slice(1)),a=r[0][f],b=l,u[f]>=p))break;v[h]===r.index&&v[h]++}return b===s[f]?!a&&v.test("")||u.push(""):u.push(s.slice(b)),u[f]>p?u.slice(0,p):u}:"0"[p](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var s=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,s,n):y.call(String(s),i,n)},function(t,e){var n=c(y,t,this,e,y!==i);if(n.done)return n.value;var o=s(t),d=String(this),p=r(o,RegExp),f=o.unicode,h=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"y":"g"),g=new p(v?o:"^(?:"+o.source+")",h),w=void 0===e?m:e>>>0;if(0===w)return[];if(0===d.length)return null===u(g,d)?[d]:[];var S=0,x=0,k=[];while(x<d.length){g.lastIndex=v?x:0;var T,E=u(g,v?d:d.slice(x));if(null===E||(T=b(a(g.lastIndex+(v?0:x)),d.length))===S)x=l(d,x,f);else{if(k.push(d.slice(S,x)),k.length===w)return k;for(var $=1;$<=E.length-1;$++)if(k.push(E[$]),k.length===w)return k;x=S=T}}return k.push(d.slice(S)),k}]}))},"683b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("span",[t._v("subroutine:")]),t._v("\n    \n  "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:""},on:{change:t.handleSelect},model:{value:t.scriptType.subr,callback:function(e){t.$set(t.scriptType,"subr",e)},expression:"scriptType.subr"}},t._l(t.scriptTypeList,(function(t){return i("el-option",{key:t.subr,attrs:{label:t.name,value:t.subr}})})),1),t._v("\n    \n  "),i("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v("delete")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("create")]),i("el-dialog",{attrs:{title:"Create Subroutine",visible:t.dialogVisible},on:{closed:t.handleClose,"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"subroutineForm",attrs:{model:t.subroutineForm,rules:t.subroutineFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"name"}},[i("el-input",{model:{value:t.subroutineForm.name,callback:function(e){t.$set(t.subroutineForm,"name",e)},expression:"subroutineForm.name"}})],1),i("el-form-item",{attrs:{prop:"subr",label:"subr"}},[i("el-input",{model:{value:t.subroutineForm.subr,callback:function(e){t.$set(t.subroutineForm,"subr",e)},expression:"subroutineForm.subr"}})],1)],1),i("template",{slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("submit")])],1)],2)],1)},s=[],r=(i("6762"),i("7f7f"),i("ac6a"),{props:["value"],data:function(){return{scriptType:null,scriptTypeList:[{name:"Main",subr:-10},{name:"Auto",subr:-20},{name:"Manual",subr:-30}],dialogVisible:!1,subroutineForm:{name:"",subr:""},subroutineFormRules:{name:[{required:!0,message:"",trigger:"blur"}],subr:[{required:!0,message:"",trigger:"blur"}]}}},beforeMount:function(){this.init()},methods:{init:function(){this.$ws().set({success:this.setSubroutineList}).send({func:32})},setSubroutineList:function(t){var e=this;32===t.func&&(this.$ws().remove(this.setSubroutineList),t.rows.forEach((function(t){e.scriptTypeList.some((function(e){return e.subr===t.subr}))||e.scriptTypeList.unshift({subr:t.subr,name:"".concat(t.subr,"     ").concat(t.name)})})))},handleCreate:function(){this.dialogVisible=!0},handleDelete:function(){var t=this;this.$confirm("Are you sure delete this subroutine?","Delete",{type:"warning"}).then((function(){var e=[-10,-20,-30];if(t.scriptType.subr&&!e.includes(t.scriptType.subr)){t.$ws().send({func:35,subr:t.scriptType.subr});var i=t.scriptTypeList.filter((function(i){return e.includes(i.subr)||i.subr!==t.scriptType.subr}));i.length!==t.scriptTypeList.length&&(t.scriptTypeList=i,t.scriptType={name:"",subr:""}),t.$emit("delete")}})).catch((function(){}))},handleClose:function(){this.$refs.subroutineForm.resetFields(),this.subroutineForm={name:"",subr:""}},handleSubmit:function(){var t=this;this.$refs.subroutineForm.validate((function(e){if(!e)return!1;var i=t.subroutineForm,n=i.name,s=i.subr;t.scriptTypeList.some((function(t){return t.subr===s}))||(t.$emit("submit",n,s),t.init(),t.dialogVisible=!1)}))},handleSelect:function(t){if(t){var e=this.scriptTypeList.filter((function(e){return e.subr===t}));this.scriptType={name:e[0].name,subr:e[0].subr},this.$emit("input",this.scriptType)}}},watch:{value:{handler:function(t){this.scriptType=t},immediate:!0}}}),l=r,a=i("2877"),u=Object(a["a"])(l,n,s,!1,null,"28c35b69",null);e["default"]=u.exports},"7de8":function(t,e,i){"use strict";i("7f7f"),i("28a5");e["a"]={mounted:function(){document.title=this.$route.name.split("-")[0]}}},a672:function(t,e,i){"use strict";var n=i("f760"),s=i.n(n);s.a},f121:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return a}));var n=[{val:"word"},{val:"uword"},{val:"dword"},{val:"udword"},{val:"float"},{val:"double"},{val:"bit"}],s=[{val:">"},{val:">="},{val:"=="},{val:"<"},{val:"<="},{val:"!="},{val:"&"},{val:"^"},{val:"|"}],r=[{val:"critical"},{val:"alarm"},{val:"warning"},{val:"event"},{val:"view"}],l=[{val:"COMMENT"},{val:"DECLARE"},{val:"INIT"},{val:"DO"},{val:"IF"},{val:"THEN"},{val:"ELSE IF"},{val:"ELSE"},{val:"POS"}],a=[{label:"VIEW(0)",key:0},{label:"OPERATOR(1)",key:1},{label:"FOREMAN(2)",key:2},{label:"MAINENANCE(3)",key:3},{label:"SUPERVISOR(4)",key:4},{label:"ENGINEER(5)",key:5},{label:"DESIGNER(6)",key:6},{label:"MANAGER(7)",key:7}]},f760:function(t,e,i){}}]);
//# sourceMappingURL=chunk-572fb2a8.d33cb7f5.js.map