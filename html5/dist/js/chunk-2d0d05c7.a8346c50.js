(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d05c7"],{"683b":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{display:"inline-block"}},[i("span",[e._v("subroutine:")]),e._v("\n    \n  "),i("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:""},on:{change:e.handleSelect},model:{value:e.scriptType.subr,callback:function(t){e.$set(e.scriptType,"subr",t)},expression:"scriptType.subr"}},e._l(e.scriptTypeList,(function(e){return i("el-option",{key:e.subr,attrs:{label:e.name,value:e.subr}})})),1),e._v("\n    \n  "),i("el-button",{attrs:{type:"danger"},on:{click:e.handleDelete}},[e._v("delete")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("create")]),i("el-dialog",{attrs:{title:"Create Subroutine",visible:e.dialogVisible},on:{closed:e.handleClose,"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"subroutineForm",attrs:{model:e.subroutineForm,rules:e.subroutineFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"name"}},[i("el-input",{model:{value:e.subroutineForm.name,callback:function(t){e.$set(e.subroutineForm,"name",t)},expression:"subroutineForm.name"}})],1),i("el-form-item",{attrs:{prop:"subr",label:"subr"}},[i("el-input",{model:{value:e.subroutineForm.subr,callback:function(t){e.$set(e.subroutineForm,"subr",t)},expression:"subroutineForm.subr"}})],1)],1),i("template",{slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("submit")])],1)],2)],1)},r=[],n=(i("6762"),i("7f7f"),i("ac6a"),{props:["value"],data:function(){return{scriptType:null,scriptTypeList:[{name:"Main",subr:-10},{name:"Auto",subr:-20},{name:"Manual",subr:-30}],dialogVisible:!1,subroutineForm:{name:"",subr:""},subroutineFormRules:{name:[{required:!0,message:"",trigger:"blur"}],subr:[{required:!0,message:"",trigger:"blur"}]}}},beforeMount:function(){this.init()},methods:{init:function(){this.$ws().set({success:this.setSubroutineList}).send({func:32})},setSubroutineList:function(e){var t=this;32===e.func&&(this.$ws().remove(this.setSubroutineList),e.rows.forEach((function(e){t.scriptTypeList.some((function(t){return t.subr===e.subr}))||t.scriptTypeList.unshift({subr:e.subr,name:"".concat(e.subr,"     ").concat(e.name)})})))},handleCreate:function(){this.dialogVisible=!0},handleDelete:function(){var e=this;this.$confirm("Are you sure delete this subroutine?","Delete",{type:"warning"}).then((function(){var t=[-10,-20,-30];if(e.scriptType.subr&&!t.includes(e.scriptType.subr)){e.$ws().send({func:35,subr:e.scriptType.subr});var i=e.scriptTypeList.filter((function(i){return t.includes(i.subr)||i.subr!==e.scriptType.subr}));i.length!==e.scriptTypeList.length&&(e.scriptTypeList=i,e.scriptType={name:"",subr:""}),e.$emit("delete")}})).catch((function(){}))},handleClose:function(){this.$refs.subroutineForm.resetFields(),this.subroutineForm={name:"",subr:""}},handleSubmit:function(){var e=this;this.$refs.subroutineForm.validate((function(t){if(!t)return!1;var i=e.subroutineForm,s=i.name,r=i.subr;e.scriptTypeList.some((function(e){return e.subr===r}))||(e.$emit("submit",s,r),e.init(),e.dialogVisible=!1)}))},handleSelect:function(e){if(e){var t=this.scriptTypeList.filter((function(t){return t.subr===e}));this.scriptType={name:t[0].name,subr:t[0].subr},this.$emit("input",this.scriptType)}}},watch:{value:{handler:function(e){this.scriptType=e},immediate:!0}}}),u=n,o=i("2877"),l=Object(o["a"])(u,s,r,!1,null,"28c35b69",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0d05c7.a8346c50.js.map